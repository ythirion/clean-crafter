## What else can be improved?
Make some clean up and renames :
- Rename `getTripsByUser` into `retrieveFriendTrips` for example
- Make the `User` class immutable for example
  - Let's use a library to help us: [vavr](https://www.vavr.io/)
  - Use `Seq` instead of `List'

```xml
<vavr.version>0.10.4</vavr.version>
...
<dependency>
    <groupId>io.vavr</groupId>
    <artifactId>vavr</artifactId>
    <version>${vavr.version}</version>
</dependency>
```

```java
public record User(Seq<Trip> trips, Seq<User> friends) {
    public User addFriend(User friend) {
        return new User(trips, friends.append(friend));
    }

    public User addTrip(Trip trip) {
        return new User(trips.append(trip), friends);
    }

    public boolean isFriendWith(User anotherUser) {
        return friends.contains(anotherUser);
    }
}
```

- What is the impact on our tests ?
  - `None` thanks to the usage of our `UserBuilder`
  - We just have to adapt it
```scala
class UserBuilder {
  private var friends: Seq[User] = Seq.empty
  private var trips: Seq[Trip] = Seq.empty

  def friendsWith(friends: User*): UserBuilder =
    assign(_ => this.friends = friends)

  def travelledTo(trips: Trip*): UserBuilder =
    assign(_ => this.trips = trips)

  def build(): User = new User(trips, friends)

  private def assign(func: Any => Unit): UserBuilder = {
    func()
    this
  }
}

object UserBuilder {
  def aUser(): UserBuilder = new UserBuilder
}
```